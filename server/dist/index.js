(()=>{var e={740:function(e,s,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=r(t(224));t(520).config();var a=t(518),n=(t(72),(0,o.default)()),i=process.env.PORT||5e3;n.listen(i,(function(){console.log("App listening on port ".concat(i)),console.log("Press Ctrl+C to quit.")})),t(924)();var u=t(824);n.use(o.default.json({limit:"50mb"})),n.use(o.default.urlencoded({limit:"50mb",extended:!0})),n.use(a()),n.use("/api/auth",u),e.exports=n},924:(e,s,t)=>{const r=t(704);t(520).config();const o=process.env.MONGO_URI;e.exports=async()=>{try{console.log("Connecting to MongoDB...");const e=await r.connect(o);console.log(`Database Connected: ${e.connection.host}`)}catch(e){console.error(e),process.exit(1)}}},80:(e,s,t)=>{t(224);const r=t(480),o=t(920),a=t(768),n=t(904),{v4:i}=t(104),u=n((async(e,s)=>{const{fullName:t,email:r,password:n,phoneNumber:u}=e.body,c=await a.findOne({email:r});try{if(c)return s.status(403).json({message:"Email already used"});{const n=i();o.hash(e.body.password,10).then((e=>{new a({userId:n,fullName:t,email:r,password:e,phoneNumber:u}).save().then((e=>s.status(201).json({message:"user successfully created!",result:e,success:!0}))).catch((e=>{s.status(500).json({error:e})}))}))}}catch(e){return s.status(412).send({success:!1,message:e.message})}})),c=n((async(e,s)=>{const{email:t,password:n}=e.body;let i;a.findOne({email:t}).then((e=>e?(i=e,o.compare(n,e.password)):s.status(401).json({message:"Authentication Failed"}))).then((e=>{if(e){let e=r.sign({email:i.email,userId:i.userId},process.env.JWT_SECRET,{expiresIn:"1h"});return s.status(200).json({accessToken:e,userId:i.userId})}return s.status(401).json({message:"Authentication Failed"})})).catch((e=>s.status(401).json({messgae:e.message,success:!1})))})),l=n((async(e,s,t)=>{const{id:r}=e.params;try{const e=await a.findOne({userId:r});return e?s.status(200).json({messgae:`user ${e.fullName}`,success:!0}):s.status(403).json({message:"user not found",success:!1})}catch(e){return s.status(401).json({sucess:!1,message:e.message})}})),d=n((async(e,s)=>{try{const e=await a.find();return console.log(e),s.status(200).json({data:e,sucess:!0,message:"users list"})}catch(e){return s.status(401).json({sucess:!1,message:e.message})}}));e.exports={register:u,login:c,userProfile:l,users:d}},340:(e,s,t)=>{const r=t(480);e.exports=(e,s,t)=>{try{const s=e.headers.authorization.replace("Bearer ",""),o=r.verify(s,process.env.JWT_SECRET);e.userData=o,t()}catch(e){return s.status(401).json({message:"Authentification Failed"})}}},376:(e,s,t)=>{const r=t(88);e.exports={regsiterValidation:async(e,s,t)=>{await r(e.body,{fullName:"required|string|min:3",email:"required|email",password:"required|min:6",phoneNumber:"required|max:10|min:10"},{},((e,r)=>{r?t():s.status(412).send({success:!1,message:"Validation failed",data:e})})).catch((e=>console.log(e)))},loginValidation:async(e,s,t)=>{await r(e.body,{email:"required|email",password:"required|min:6"},{},((e,r)=>{r?t():s.status(412).send({success:!1,message:"Validation failed",data:e})})).catch((e=>console.log(e)))}}},768:(e,s,t)=>{const r=t(704),o=r.Schema({userId:{type:String},fullName:{type:String},email:{type:String},password:{type:String},phoneNumber:{type:String}});e.exports=r.model("User",o)},824:(e,s,t)=>{const r=t(224).Router(),{regsiterValidation:o,loginValidation:a}=t(376),{login:n,register:i,userProfile:u,users:c}=t(80),l=t(340);r.post("/register",o,i),r.post("/login",a,n),r.get("/profile/:id",l,u),r.get("/users",l,c),e.exports=r},88:(e,s,t)=>{const r=t(692);e.exports=async(e,s,t,o)=>{const a=new r(e,s,t);a.passes((()=>o(null,!0))),a.fails((()=>o(a.errors,!1)))}},920:e=>{"use strict";e.exports=require("bcryptjs")},518:e=>{"use strict";e.exports=require("cors")},520:e=>{"use strict";e.exports=require("dotenv")},224:e=>{"use strict";e.exports=require("express")},904:e=>{"use strict";e.exports=require("express-async-handler")},480:e=>{"use strict";e.exports=require("jsonwebtoken")},704:e=>{"use strict";e.exports=require("mongoose")},104:e=>{"use strict";e.exports=require("uuid")},692:e=>{"use strict";e.exports=require("validatorjs")},72:e=>{"use strict";e.exports=require("path")}},s={};!function t(r){var o=s[r];if(void 0!==o)return o.exports;var a=s[r]={exports:{}};return e[r].call(a.exports,a,a.exports,t),a.exports}(740)})();