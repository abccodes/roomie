(()=>{"use strict";var e={180:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(704));a(n(520)).default.config(),t.default=function(){return r(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),console.log("Connecting to MongoDB..."),[4,i.default.connect(process.env.MONGO_URI)];case 1:return e=n.sent(),console.log("Database Connected: ".concat(e.connection.host)),[3,3];case 2:return t=n.sent(),console.error(t),process.exit(1),[3,3];case 3:return[2]}}))}))}},980:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.users=t.userProfile=t.login=t.register=void 0;var i=a(n(480)),u=a(n(920)),s=a(n(904)),l=n(104),c=a(n(264));a(n(520)).default.config();var f=(0,s.default)((function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,a,i,s,f,d;return o(this,(function(o){switch(o.label){case 0:return n=e.body,r=n.fullName,a=n.email,i=n.password,s=n.phoneNumber,[4,c.default.findOne({email:a})];case 1:return o.sent()?(t.status(403).json({message:"Email already used"}),[2]):(f=(0,l.v4)(),[4,u.default.hash(i,10)]);case 2:return d=o.sent(),[4,new c.default({userId:f,fullName:r,email:a,password:d,phoneNumber:s}).save()];case 3:return o.sent(),t.status(201).json({message:"User successfully created!",success:!0}),[2]}}))}))}));t.register=f;var d=(0,s.default)((function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,a,s,l;return o(this,(function(o){switch(o.label){case 0:return n=e.body,r=n.email,a=n.password,[4,c.default.findOne({email:r})];case 1:return(s=o.sent())?[4,u.default.compare(a,s.password)]:(t.status(401).json({message:"Authentication Failed"}),[2]);case 2:return o.sent()?(l=i.default.sign({email:s.email,userId:s.userId},function(e){var t=process.env[e];if(!t)throw new Error("Environment variable ".concat(e," is not set."));return t}("JWT_SECRET"),{expiresIn:"1h"}),t.status(200).json({accessToken:l,userId:s.userId}),[2]):(t.status(401).json({message:"Authentication Failed"}),[2])}}))}))}));t.login=d;var p=(0,s.default)((function(e,t){return r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=e.params.id,[4,c.default.findOne({userId:n})];case 1:return(r=o.sent())?(t.status(200).json({message:"User ".concat(r.fullName),success:!0}),[2]):(t.status(403).json({message:"User not found",success:!1}),[2])}}))}))}));t.userProfile=p;var h=(0,s.default)((function(e,t){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,c.default.find()];case 1:return e=n.sent(),t.status(200).json({data:e,success:!0,message:"Users list"}),[2]}}))}))}));t.users=h},740:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(224)),a=r(n(520)),i=r(n(518)),u=r(n(180)),s=r(n(716));a.default.config();var l=(0,o.default)(),c=process.env.PORT||5e3;l.listen(c,(function(){console.log("App listening on port ".concat(c)),console.log("Press Ctrl+C to quit.")})),(0,u.default)(),l.use(o.default.json({limit:"50mb"})),l.use(o.default.urlencoded({limit:"50mb",extended:!0})),l.use((0,i.default)()),l.use("/api/auth",s.default),t.default=l},824:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(480));t.default=function(e,t,n){var r;try{var a=null===(r=e.headers.authorization)||void 0===r?void 0:r.replace("Bearer ","");if(!a)throw new Error("Token not provided");var i=o.default.verify(a,function(e){var t=process.env[e];if(!t)throw new Error("Environment variable ".concat(e," is not set."));return t}("JWT_SECRET"));e.userData=i,n()}catch(e){return t.status(401).json({message:"Authentication Failed"})}}},460:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loginValidation=t.registerValidation=void 0;var i=a(n(215));t.registerValidation=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:r={fullName:"required|string|min:3",email:"required|email",password:"required|min:6",phoneNumber:"required|max:10|min:10"},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,i.default)(e.body,r,{},(function(e,r){r?n():t.status(412).send({success:!1,message:"Validation failed",data:e})}))];case 2:return o.sent(),[3,4];case 3:return a=o.sent(),console.log(a),[3,4];case 4:return[2]}}))}))},t.loginValidation=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:r={email:"required|email",password:"required|min:6"},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,i.default)(e.body,r,{},(function(e,r){r?n():t.status(412).send({success:!1,message:"Validation failed",data:e})}))];case 2:return o.sent(),[3,4];case 3:return a=o.sent(),console.log(a),[3,4];case 4:return[2]}}))}))}},264:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(704),o=new r.Schema({userId:{type:String},fullName:{type:String},email:{type:String},password:{type:String},phoneNumber:{type:String}}),a=(0,r.model)("User",o);t.default=a},716:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(224)).default.Router(),a=n(460),i=n(980),u=r(n(824));o.post("/register",a.registerValidation,i.register),o.post("/login",a.loginValidation,i.login),o.get("/profile/:id",u.default,i.userProfile),o.get("/users",u.default,i.users),t.default=o},215:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(72));t.default=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){return(r=new i.default(e,t,n)).passes((function(){return a(null,!0)})),r.fails((function(){return a(r.errors,!1)})),[2]}))}))}},920:e=>{e.exports=require("bcryptjs")},518:e=>{e.exports=require("cors")},520:e=>{e.exports=require("dotenv")},224:e=>{e.exports=require("express")},904:e=>{e.exports=require("express-async-handler")},480:e=>{e.exports=require("jsonwebtoken")},704:e=>{e.exports=require("mongoose")},104:e=>{e.exports=require("uuid")},72:e=>{e.exports=require("validatorjs")}},t={};!function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}(740)})();